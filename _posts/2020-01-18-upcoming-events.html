---
layout: default
title: "Upcoming Events"
permalink: /events/
---

<style>
  :root{
    --stroke: rgba(10,15,25,.10);
    --text: rgba(10,15,25,.92);
    --muted: rgba(10,15,25,.62);
    --shadow: 0 10px 30px rgba(10,15,25,.10);
    --radius: 16px;
    --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  }
  *{ box-sizing:border-box; }

  .events-page{
  font-family:var(--sans);
  color:var(--text);
  background: transparent;
  border: 0;
  border-radius: 0;
  padding: 0;
}
  .wrap{ max-width:1050px; margin:0 auto; }

  .bar{
    position:sticky; top:0; z-index:5;
    background: rgba(255,255,255,.82);
    border:1px solid var(--stroke);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding:10px;
  }
  .barTop{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    margin-bottom:10px;
  }
  .barTop h1{
    font-size:15px; margin:0;
    letter-spacing:.2px;
  }
  .count{
    font-size:11px; color:var(--muted);
    border:1px solid var(--stroke);
    background: rgba(255,255,255,.75);
    padding:6px 10px;
    border-radius:999px;
    white-space:nowrap;
  }

  .filters{
    display:grid;
    grid-template-columns: 1.3fr 1fr 1fr;
    gap:10px;
    align-items:center;
  }

  select{
    width:100%;
    height:38px;
    border:1px solid var(--stroke);
    background: rgba(255,255,255,.90);
    color:var(--text);
    padding:10px 10px;
    border-radius: 12px;
    outline:none;
    font-size:12px;
  }
  select:focus{
    border-color: rgba(80,120,255,.35);
    box-shadow: 0 0 0 3px rgba(80,120,255,.16);
  }

  .tableWrap{
    margin-top:12px;
    border:1px solid var(--stroke);
    border-radius: var(--radius);
    overflow:hidden;
    box-shadow: var(--shadow);
    background: rgba(255,255,255,.80);
  }

  table{
    width:100%;
    border-collapse:separate;
    border-spacing:0;
    font-size:12px;
  }
  thead th{
    text-align:left;
    font-size:11px;
    color: var(--muted);
    font-weight:700;
    letter-spacing:.2px;
    padding:10px 12px;
    background: rgba(10,15,25,.03);
    border-bottom:1px solid rgba(10,15,25,.08);
  }
  tbody td{
    padding:10px 12px;
    border-bottom:1px solid rgba(10,15,25,.08);
    vertical-align:top;
  }
  tbody tr:hover td{
    background: rgba(80,120,255,.06);
  }
  tbody tr:last-child td{ border-bottom:none; }

  .venue{ font-weight:700; color: rgba(10,15,25,.92); }
  .dt{
    font-family: var(--mono);
    color: rgba(10,15,25,.80);
    white-space:nowrap;
  }
  .name{ color: rgba(10,15,25,.90); }

  .empty{
    padding:14px 12px;
    color: var(--muted);
    line-height:1.45;
    display:none;
  }

  @media (max-width: 860px){
    .filters{
      display:flex;
      flex-wrap:nowrap;
      gap:8px;
      overflow-x:auto;
      -webkit-overflow-scrolling: touch;
    }
    .filters select{
      flex:1 1 0;
      min-width:0;
      height:38px;
      font-size:11px;
      padding:9px 8px;
    }
    .dt{ white-space:normal; }
  }
</style>

<div class="events-page">
  <div class="wrap">

    <div class="bar">
      <div class="barTop">
        <h1>Upcoming Events</h1>
        <div class="count" id="countPill">0 events</div>
      </div>

      <div class="filters">
        <select id="venueFilter" aria-label="Venue"></select>
        <select id="monthFilter" aria-label="Month"></select>
        <select id="categoryFilter" aria-label="Category"></select>
      </div>
    </div>

    <div class="tableWrap">
      <table>
        <thead>
          <tr>
            <th style="width:32%;">Venue</th>
            <th style="width:18%;">Date</th>
            <th style="width:16%;">Time (Central)</th>
            <th>Event name</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
      <div class="empty" id="empty">No events match your filters.</div>
    </div>

  </div>
</div>

<script>
  const EVENT_TIMEZONE = "America/Chicago";
  const HIDE_AFTER_HOURS = 8;

  // Hide an event once it is more than HIDE_AFTER_HOURS past its scheduled start (Central time).
  function isExpired(ev, now){
    const start = eventStartInstant(ev);
    if (!start) return false;
    const cutoffMs = start.getTime() + HIDE_AFTER_HOURS * 60 * 60 * 1000;
    return now.getTime() > cutoffMs;
  }

  function eventStartInstant(ev){
    const dateStr = String(ev && ev.date || "").trim();
    const timeStr = String(ev && ev.time || "").trim();
    const m = timeStr.match(/^(\d{1,2}):(\d{2})$/);
    if (!dateStr || !m) return null;

    const hh = String(m[1]).padStart(2, "0");
    const mm = m[2];
    return zonedTimeToUtc(dateStr, hh + ":" + mm, EVENT_TIMEZONE);
  }

  // Convert "YYYY-MM-DD" + "HH:MM" interpreted in timeZone into a Date representing the correct instant.
  function zonedTimeToUtc(dateStr, timeStr, timeZone){
    const parts = String(dateStr || "").split("-");
    if (parts.length !== 3) return null;

    const y  = parseInt(parts[0], 10);
    const mo = parseInt(parts[1], 10);
    const d  = parseInt(parts[2], 10);

    const t = String(timeStr || "").split(":");
    if (t.length < 2) return null;

    const hh = parseInt(t[0], 10);
    const mm = parseInt(t[1], 10);

    if (![y, mo, d, hh, mm].every(Number.isFinite)) return null;

    // First guess: treat the wall time as if it were UTC, then shift by the zone offset at that instant.
    const utcGuess = new Date(Date.UTC(y, mo - 1, d, hh, mm, 0));
    const offsetMin = getTimeZoneOffsetMinutes(utcGuess, timeZone);

    return new Date(utcGuess.getTime() - offsetMin * 60 * 1000);
  }

  // Returns the offset in minutes for timeZone at the instant represented by date.
  function getTimeZoneOffsetMinutes(date, timeZone){
    const dtf = new Intl.DateTimeFormat("en-US", {
      timeZone,
      year: "numeric",
      month: "2-digit",
      day: "2-digit",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
      hour12: false
    });

    const map = {};
    dtf.formatToParts(date).forEach(p => {
      if (p.type !== "literal") map[p.type] = p.value;
    });

    const asUTC = Date.UTC(
      parseInt(map.year, 10),
      parseInt(map.month, 10) - 1,
      parseInt(map.day, 10),
      parseInt(map.hour, 10),
      parseInt(map.minute, 10),
      parseInt(map.second, 10)
    );

    return (asUTC - date.getTime()) / 60000;
  }

  // Dummy events spanning next ~2 months from 2026-01-18
  const EVENTS = [
    // Chicago Vedanta
    e("Chicago Vedanta", "2026-02-15", "18:30", "Maha Shiva Ratri Puja", "Puja"),
    e("Chicago Vedanta", "2026-02-22", "11:00", "Sri Ramakrishna Birthday Puja", "Puja"),

    // Vedanta NY
    e("Vedanta NY", "2026-01-20", "18:30", "Gospel of Sri Ramakrishna", "Talk"),
    e("Vedanta NY", "2026-01-27", "18:30", "Gospel of Sri Ramakrishna", "Talk"),
    
    // Vedanta Org
    e("Vedanta Org", "2026-01-20", "13:00", "Swami Brahmananda Puja", "Puja"),
    e("Vedanta Org", "2026-01-25", "12:00", "Swami Brahmananda Puja", "Puja"),
    
    // Western WA
    e("Vedanta Society of Western WA", "2026-02-15", "20:00", "Maha Shiva Ratri Puja", "Puja"),
    e("Vedanta Society of Western WA", "2026-02-22", "13:00", "Sri Ramakrishna Puja", "Puja"),

    // Vedanta DC
    e("Vedanta DC", "2026-01-25", "10:00", "The Graded Path: Swami Bhaswatananda", "Talk"),

    // Belur Math Official

    // Chicago Kali Bari
    e("Chicago Kali Bari", "2026-01-23", "9:00", "Saraswati Puja", "Puja")
  ]
  .sort((a,b) => (a.date + " " + a.time).localeCompare(b.date + " " + b.time));

  function e(venue, date, time, name, category){
    return { venue, date, time, name, category: category || "Other" };
  }

  const venueFilter    = document.getElementById("venueFilter");
  const monthFilter    = document.getElementById("monthFilter");
  const categoryFilter = document.getElementById("categoryFilter");
  const tbody          = document.getElementById("tbody");
  const empty          = document.getElementById("empty");
  const countPill      = document.getElementById("countPill");

  // Populate dropdowns (derived from the data so you only maintain EVENTS)
  const BASE_EVENTS_AT_LOAD = EVENTS.filter(ev => !isExpired(ev, new Date()));
  fillSelect(venueFilter, "ALL", "All venues", uniqueInOrder(BASE_EVENTS_AT_LOAD.map(x => x.venue)));
  fillSelect(monthFilter, "ALL", "All months", uniqueInOrder(BASE_EVENTS_AT_LOAD.map(x => monthKey(x.date))).map(k => ({ value:k, label: monthLabel(k) })));
  fillSelect(categoryFilter, "ALL", "All categories", uniqueInOrder(BASE_EVENTS_AT_LOAD.map(x => x.category)));

  venueFilter.addEventListener("change", render);
  monthFilter.addEventListener("change", render);
  categoryFilter.addEventListener("change", render);

  render();

  function getFiltered(){
    const v = venueFilter.value;
    const m = monthFilter.value;
    const c = categoryFilter.value;

    const now = new Date();
    const base = EVENTS.filter(ev => !isExpired(ev, now));

    return base.filter(ev => {
      if (v !== "ALL" && ev.venue !== v) return false;
      if (m !== "ALL" && monthKey(ev.date) !== m) return false;
      if (c !== "ALL" && ev.category !== c) return false;
      return true;
    });
  }

  function render(){
    const rows = getFiltered();
    countPill.textContent = rows.length + (rows.length === 1 ? " event" : " events");

    tbody.innerHTML = "";
    if (!rows.length){
      empty.style.display = "block";
      return;
    }
    empty.style.display = "none";

    rows.forEach(ev => {
      const tr = document.createElement("tr");
      tr.innerHTML = "" +
        '<td class="venue">' + escapeHtml(ev.venue) + '</td>' +
        '<td class="dt">' + escapeHtml(ev.date) + '</td>' +
        '<td class="dt">' + escapeHtml(formatTime(ev.time)) + '</td>' +
        '<td class="name">' + escapeHtml(ev.name) + '</td>';
      tbody.appendChild(tr);
    });
  }

  function fillSelect(sel, allValue, allLabel, items){
    sel.innerHTML = "";

    const optAll = document.createElement("option");
    optAll.value = allValue;
    optAll.textContent = allLabel;
    sel.appendChild(optAll);

    items.forEach(item => {
      const opt = document.createElement("option");
      if (typeof item === "string"){
        opt.value = item;
        opt.textContent = item;
      } else {
        opt.value = item.value;
        opt.textContent = item.label;
      }
      sel.appendChild(opt);
    });
  }

  function uniqueInOrder(arr){
    const seen = new Set();
    const out = [];
    arr.forEach(v => {
      const s = String(v || "").trim();
      if (!s) return;
      if (!seen.has(s)){
        seen.add(s);
        out.push(s);
      }
    });
    return out;
  }

  function monthKey(isoDate){
    const s = String(isoDate || "");
    return s.length >= 7 ? s.slice(0,7) : "";
  }

  function monthLabel(ym){
    const parts = String(ym || "").split("-");
    if (parts.length !== 2) return ym;
    const y = parts[0];
    const m = parseInt(parts[1], 10);
    const months = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
    const mm = (m >= 1 && m <= 12) ? months[m-1] : parts[1];
    return mm + "-" + y;
  }

  function formatTime(hhmm){
    const s = String(hhmm || "").trim();
    if (!s) return "";

    const parts = s.split(":");
    const hh = parseInt(parts[0] || "0", 10);
    const mm = parseInt(parts[1] || "0", 10);

    const isPM = hh >= 12;
    let h12 = hh % 12;
    if (h12 === 0) h12 = 12;

    const ampm = isPM ? "PM" : "AM";
    if (mm === 0) return String(h12) + " " + ampm;

    const mm2 = String(mm).padStart(2, "0");
    return String(h12) + ":" + mm2 + " " + ampm;
  }

  function escapeHtml(s){
    return String(s || "")
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }
</script>
